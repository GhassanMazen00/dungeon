<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Unlock Ghassan‚Äôs Vault</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
    body {
      font-family: 'Press Start 2P', cursive;
      background: linear-gradient(135deg, #ff0080, #7928ca, #2afadf, #ff8c00);
      background-size: 400% 400%;
      animation: gradientShift 8s ease infinite;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      text-align: center;
    }
    @keyframes gradientShift {
      0% {background-position: 0% 50%;}
      50% {background-position: 100% 50%;}
      100% {background-position: 0% 50%;}
    }
    .banner { position: fixed; top: 0; width: 100%; background: rgba(0,0,0,0.7); color: #00ffea;
      padding: 10px; font-size: 12px; border-bottom: 2px solid #ff0; text-shadow: 2px 2px #000; z-index: 1000; }
    h1 { font-size: 22px; margin: 70px 0 20px; text-shadow: 3px 3px #000; }
    .input-box { display: flex; align-items: center; justify-content: center; gap: 8px; margin-bottom: 10px; flex-wrap: wrap; }
    input, button, textarea {
      padding: 12px; margin: 4px; border: 3px solid #000; border-radius: 0;
      font-size: 14px; font-family: 'Press Start 2P', cursive; outline: none;
    }
    input, textarea { width: 220px; background: #111; color: #0f0; }
    button { background: #ff0080; color: #fff; cursor: pointer; transition: 0.2s; }
    button:hover { background: #00ffea; color: #000; }
    .hidden { display: none; }
    .links a, .links button {
      display: block; margin: 12px 0; color: #00ffea; text-decoration: none;
      font-size: 14px; text-shadow: 2px 2px #000;
    }
    .links a:hover { color: #ff0; }
    .badge {
      display: inline-block; margin-left: 10px; padding: 6px 8px; background: #00ffea; color: #000;
      border: 3px solid #000; box-shadow: 3px 3px #000; font-size: 10px; vertical-align: middle;
    }
    .modal { display: none; position: fixed; z-index: 999; left: 0; top: 0; width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.9); justify-content: center; align-items: center; overflow-y: auto; }
    .modal-content {
      background: #111; padding: 20px; border: 4px solid #00ffea; border-radius: 10px;
      max-width: 900px; width: 90%; text-align: center;
    }
    .close-btn {
      margin-top: 20px; padding: 10px 16px; background: #ff0080; border: 3px solid #000;
      color: #fff; font-family: 'Press Start 2P', cursive; cursor: pointer;
    }
    .close-btn:hover { background: #00ffea; color: #000; }

    /* Notes */
    #notesSection {
      margin-top: 30px; padding: 20px; background: rgba(0,0,0,0.6);
      border: 3px solid #00ffea; border-radius: 12px; max-width: 900px;
    }
    #notesSection h2 { color: #ff0; text-shadow: 2px 2px #000; margin-bottom: 20px; font-size: 16px; }
    .note-form { display: flex; flex-direction: column; gap: 10px; margin-bottom: 20px; align-items: center; }
    .note-form input, .note-form textarea {
      background: #111; color: #0f0; border: 2px solid #00ffea; padding: 10px;
      font-size: 12px; width: 100%; max-width: 520px;
    }
    .note-form button { background: #ff0080; border: 2px solid #000; padding: 10px 14px; cursor: pointer; }
    .note-form button:hover { background: #00ffea; color: #000; }
    .notes-wall {
      display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 15px;
    }
    .note {
      padding: 15px; background: #222; border: 3px solid #ff0080; box-shadow: 3px 3px #000;
      font-size: 12px; word-wrap: break-word; transform: rotate(-1deg);
      text-align: left; position: relative; min-height: 84px;
    }
    .note:nth-child(odd) { background: #333; border-color: #00ffea; transform: rotate(1deg); }
    .note .nickname { font-weight: bold; color: #ff0; margin-bottom: 8px; display: block; }
    .delete-btn {
      display: inline-block; margin-top: 8px; background: #e60026; border: 3px solid #000;
      color: #fff; padding: 6px 8px; font-size: 10px; font-family: 'Press Start 2P', cursive;
      cursor: pointer; box-shadow: 2px 2px #000;
    }
    .delete-btn:hover { background: #ff8c00; color: #000; }

    /* Snake Game */
    #snakeCanvas { background: #000; display: block; margin: 0 auto; border: 4px solid #00ffea; }
    #score { margin: 10px; color: #ff0; }
    #leaderboard { margin-top: 20px; text-align: left; color: #fff; }
    #leaderboard h3 { color: #ff0; }
    .game-over { color: #ff0080; font-size: 14px; margin: 15px 0; }
    .controls { margin-top: 15px; }
    .controls button {
      background: #00ffea; border: 3px solid #000; padding: 10px; margin: 5px;
      font-size: 18px; color: #000;
    }
  </style>
</head>
<body>
  <div class="banner">Abo Mazen's dungeon</div>
  <h1>üïπÔ∏è ENTER THE KEY</h1>
  <div class="input-box">
    <input type="password" id="keyInput" placeholder="Type here..." onkeydown="if(event.key==='Enter')unlock()">
    <button onclick="showHint()">üí° Hint</button>
  </div>
  <button onclick="unlock()">UNLOCK</button>

  <div id="links" class="hidden">
    <h2> üéâ ACCESS GRANTED <span id="roleBadge" class="badge hidden">ADMIN MODE</span> </h2>
    <div class="links">
      <a href="https://github.com/GhassanMazen00/GhassanMazen00" target="_blank">üíª GitHub</a>
      <a href="https://t.snapchat.com/p3KLzoLR" target="_blank">üëª Snapchat</a>
      <a href="mailto:ghassanmazen@zohomail.com">üìß Email</a>
      <button onclick="openModal()">üíÉ My Bitches</button>
      <button onclick="trap()">üîû +18 Pics of Ghassan</button>
      <button onclick="openSnake()">üéÆ Play Snake</button>
    </div>

    <!-- Visitor Notes Wall -->
    <div id="notesSection">
      <h2>üìù Visitor Wall</h2>
      <div class="note-form">
        <input type="text" id="nickname" placeholder="Your nickname...">
        <textarea id="noteText" rows="3" placeholder="Leave a note..."></textarea>
        <button onclick="addNote()">Post Note</button>
      </div>
      <div class="notes-wall" id="notesWall"></div>
    </div>
  </div>

  <!-- Snake Game Modal -->
  <div class="modal" id="snakeModal">
    <div class="modal-content">
      <h2>üêç Snake Game</h2>
      <canvas id="snakeCanvas" width="400" height="400"></canvas>
      <div id="score">Score: 0</div>
      <div id="gameOverScreen" class="hidden">
        <div class="game-over">Game Over ‚Äì Score: <span id="finalScore"></span></div>
        <button onclick="restartSnake()">‚ñ∂ Play Again</button>
      </div>
      <div id="leaderboard">
        <h3>üèÜ Leaderboard</h3>
        <ul id="leaderboardList"></ul>
      </div>
      <div class="controls">
        <button onclick="changeDirection('LEFT')">‚¨ÖÔ∏è</button>
        <button onclick="changeDirection('UP')">‚¨ÜÔ∏è</button>
        <button onclick="changeDirection('DOWN')">‚¨áÔ∏è</button>
        <button onclick="changeDirection('RIGHT')">‚û°Ô∏è</button>
      </div>
      <button class="close-btn" onclick="closeSnake()">CLOSE</button>
    </div>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

  <script>
    // Modes
    let mode = 'locked';
    let isAdmin = false;
    const VISITOR_PASS = "10101999";
    const ADMIN_PASS = "ananke";

    // Firebase config
    const firebaseConfig = {
      databaseURL: "https://dungeon-data-base-default-rtdb.firebaseio.com/"
    };
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    /* ---------------- Unlock ---------------- */
    function unlock() {
      const key = document.getElementById('keyInput').value.trim();
      if (key === VISITOR_PASS) {
        mode = 'visitor'; isAdmin = false; enterVault();
      } else if (key === ADMIN_PASS) {
        mode = 'admin'; isAdmin = true; enterVault();
      } else {
        alert("‚ùå WRONG KEY. TRY AGAIN!");
      }
    }
    function enterVault() {
      document.getElementById('links').classList.remove('hidden');
      document.getElementById('roleBadge').classList.toggle('hidden', !isAdmin);
      displayNotes();
      setTimeout(() => document.getElementById('links').scrollIntoView({behavior:'smooth'}), 50);
    }
    function showHint() { alert("When was the greatest human on earth born? (type numbers only, format: daymonthyear)"); }
    function trap() { alert("‚ö†Ô∏è Ghassan got notified that you tried to see him naked, shame on you!"); }

    /* ---------------- Notes ---------------- */
    function escapeHTML(str) {
      return str.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
    }
    function addNote() {
      const nickname = document.getElementById('nickname').value.trim();
      const noteText = document.getElementById('noteText').value.trim();
      if (!nickname || !noteText) { alert("‚ö†Ô∏è Please enter a nickname and a note!"); return; }
      db.ref("notes").push({ nickname, noteText });
      document.getElementById('nickname').value = "";
      document.getElementById('noteText').value = "";
    }
    function displayNotes() {
      const notesWall = document.getElementById('notesWall');
      db.ref("notes").on("value", snapshot => {
        notesWall.innerHTML = "";
        snapshot.forEach(child => {
          const n = child.val();
          const noteDiv = document.createElement('div');
          noteDiv.classList.add('note');
          const safeNick = escapeHTML(n.nickname);
          const safeText = escapeHTML(n.noteText).replace(/\n/g, "<br>");
          noteDiv.innerHTML = `
            <span class="nickname">${safeNick}</span>
            <div>${safeText}</div>
            ${isAdmin ? `<button class="delete-btn" onclick="deleteNote('${child.key}')">‚ùå Delete</button>` : ""}
          `;
          notesWall.appendChild(noteDiv);
        });
      });
    }
    function deleteNote(id) {
      if (!isAdmin) return;
      db.ref("notes/" + id).remove();
    }

    /* ---------------- Snake Game ---------------- */
    let snake, food, direction, score, gameInterval;
    const box = 20;
    const canvas = document.getElementById("snakeCanvas");
    const ctx = canvas.getContext("2d");
    const scoreDisplay = document.getElementById("score");
    const finalScoreDisplay = document.getElementById("finalScore");

    function openSnake() {
      document.getElementById("snakeModal").style.display = "flex";
      initSnake();
    }
    function closeSnake() {
      clearInterval(gameInterval);
      document.getElementById("snakeModal").style.display = "none";
    }

    function initSnake() {
      snake = [{x: 9 * box, y: 10 * box}];
      direction = null;
      score = 0;
      food = {
        x: Math.floor(Math.random()*20) * box,
        y: Math.floor(Math.random()*20) * box
      };
      document.getElementById("gameOverScreen").classList.add("hidden");
      scoreDisplay.innerText = "Score: 0";
      clearInterval(gameInterval);
      gameInterval = setInterval(drawSnake, 100);
      loadLeaderboard();
    }

    function changeDirection(dir) {
      if (dir === "LEFT" && direction !== "RIGHT") direction = "LEFT";
      else if (dir === "UP" && direction !== "DOWN") direction = "UP";
      else if (dir === "RIGHT" && direction !== "LEFT") direction = "RIGHT";
      else if (dir === "DOWN" && direction !== "UP") direction = "DOWN";
    }
    document.addEventListener("keydown", event => {
      if (event.key === "ArrowLeft") changeDirection("LEFT");
      else if (event.key === "ArrowUp") changeDirection("UP");
      else if (event.key === "ArrowRight") changeDirection("RIGHT");
      else if (event.key === "ArrowDown") changeDirection("DOWN");
    });

    function drawSnake() {
      ctx.fillStyle = "#000"; ctx.fillRect(0, 0, canvas.width, canvas.height);
      for (let i=0; i<snake.length; i++) {
        ctx.fillStyle = (i===0) ? "#ff0" : "#0f0";
        ctx.fillRect(snake[i].x, snake[i].y, box, box);
        ctx.strokeStyle = "#000"; ctx.strokeRect(snake[i].x, snake[i].y, box, box);
      }
      ctx.fillStyle = "#f00";
      ctx.fillRect(food.x, food.y, box, box);

      let snakeX = snake[0].x;
      let snakeY = snake[0].y;
      if (direction === "LEFT") snakeX -= box;
      if (direction === "UP") snakeY -= box;
      if (direction === "RIGHT") snakeX += box;
      if (direction === "DOWN") snakeY += box;

      // Wrap-around logic
      if (snakeX < 0) snakeX = canvas.width - box;
      if (snakeX >= canvas.width) snakeX = 0;
      if (snakeY < 0) snakeY = canvas.height - box;
      if (snakeY >= canvas.height) snakeY = 0;

      // Eat food
      if (snakeX === food.x && snakeY === food.y) {
        score++;
        scoreDisplay.innerText = "Score: " + score;
        food = {
          x: Math.floor(Math.random()*20) * box,
          y: Math.floor(Math.random()*20) * box
        };
      } else {
        snake.pop();
      }

      let newHead = {x: snakeX, y: snakeY};

      // Check self collision
      for (let i=0; i<snake.length; i++) {
        if (newHead.x === snake[i].x && newHead.y === snake[i].y) {
          gameOver();
          return;
        }
      }
      snake.unshift(newHead);
    }

    function gameOver() {
      clearInterval(gameInterval);
      finalScoreDisplay.innerText = score;
      document.getElementById("gameOverScreen").classList.remove("hidden");
      saveScore(score);
    }
    function restartSnake() { initSnake(); }

    /* Nickname + Leaderboard */
    function getNickname() {
  let nickname = localStorage.getItem("snakeNickname");
  if (!nickname) {
    nickname = prompt("Enter your nickname:");
    if (nickname && nickname.trim() !== "") {
      nickname = nickname.trim();
      localStorage.setItem("snakeNickname", nickname);
    } else {
      nickname = "Player" + Math.floor(Math.random() * 1000);
      localStorage.setItem("snakeNickname", nickname);
    }
  }
  return nickname;
}
    function saveScore(newScore) {
  const nickname = getNickname();
  const ref = db.ref("snakeScores/" + nickname);
  ref.once("value").then(snapshot => {
    const oldData = snapshot.val();
    if (!oldData || newScore > oldData.score) {
      ref.set({ score: newScore });
    }
  });
}
    function loadLeaderboard() {
  const list = document.getElementById("leaderboardList");
  db.ref("snakeScores").once("value").then(snapshot => {
    const scores = [];
    snapshot.forEach(child => {
      const data = child.val();
      scores.push({ name: child.key, score: data.score });
    });
    scores.sort((a, b) => b.score - a.score);
    list.innerHTML = "";
    scores.slice(0, 10).forEach(s => {
      const li = document.createElement("li");
      li.innerText = `${s.name}: ${s.score}`;
      list.appendChild(li);
    });
  });

  </script>
</body>
</html>
