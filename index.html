<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Unlock Ghassan‚Äôs Vault</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
    body {
      font-family: 'Press Start 2P', cursive;
      background: linear-gradient(135deg, #ff0080, #7928ca, #2afadf, #ff8c00);
      background-size: 400% 400%;
      animation: gradientShift 8s ease infinite;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      text-align: center;
    }
    @keyframes gradientShift {
      0% {background-position: 0% 50%;}
      50% {background-position: 100% 50%;}
      100% {background-position: 0% 50%;}
    }

    .banner {
      position: fixed; top: 0; width: 100%;
      background: rgba(0,0,0,0.7);
      color: #00ffea;
      padding: 10px;
      font-size: 12px;
      border-bottom: 2px solid #ff0;
      text-shadow: 2px 2px #000;
      z-index: 1000;
    }
    h1 {
      font-size: 22px;
      margin: 70px 0 20px;
      text-shadow: 3px 3px #000;
    }

    /* Pixel character + speech bubble */
    #pixelCharacterContainer {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 20px;
      position: relative;
    }
    #pixelCharacter {
      cursor: pointer;
      transition: transform 0.2s ease;
      image-rendering: pixelated;
    }
    #pixelCharacter:hover { transform: scale(1.2); }
    #speechBubble {
      background: #fff;
      color: #000;
      padding: 10px 14px;
      border: 3px solid #000;
      border-radius: 12px;
      max-width: 240px;
      text-align: center;
      font-size: 12px;
      font-family: 'Press Start 2P', cursive;
      text-shadow: none;
      position: absolute;
      top: -90px;
      left: 50%;
      transform: translateX(-50%);
      box-shadow: 3px 3px #000;
    }
    #speechBubble::after {
      content: "";
      position: absolute;
      bottom: -12px;
      left: 50%;
      transform: translateX(-50%);
      border-width: 12px;
      border-style: solid;
      border-color: #fff transparent transparent transparent;
      filter: drop-shadow(2px 2px 0 #000);
    }
    .hidden { display: none; }

    .input-box {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-bottom: 10px;
      flex-wrap: wrap;
    }
    input, button, textarea {
      padding: 12px;
      margin: 4px;
      border: 3px solid #000;
      border-radius: 0;
      font-size: 14px;
      font-family: 'Press Start 2P', cursive;
      outline: none;
    }
    input, textarea {
      width: 220px;
      background: #111;
      color: #0f0;
    }
    button {
      background: #ff0080;
      color: #fff;
      cursor: pointer;
      transition: 0.2s;
    }
    button:hover {
      background: #00ffea;
      color: #000;
    }

    .links {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
      margin-top: 20px;
    }
    .links a, .links button {
      width: 220px;
      text-align: center;
      color: #00ffea;
      text-decoration: none;
      font-size: 14px;
      text-shadow: 2px 2px #000;
    }
    .links a:hover { color: #ff0; }
    .badge {
      display: inline-block;
      margin-left: 10px;
      padding: 6px 8px;
      background: #00ffea;
      color: #000;
      border: 3px solid #000;
      box-shadow: 3px 3px #000;
      font-size: 10px;
      vertical-align: middle;
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 999;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.9);
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background: #111;
      padding: 20px;
      border: 4px solid #00ffea;
      border-radius: 10px;
      max-width: 700px;
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }
    .pixel-character { cursor: pointer; transition: transform 0.2s ease; }
    .pixel-character:hover { transform: scale(1.2); }
    .close-btn {
      margin-top: 20px;
      padding: 10px 16px;
      background: #ff0080;
      border: 3px solid #000;
      color: #fff;
      font-family: 'Press Start 2P', cursive;
      cursor: pointer;
    }
    .close-btn:hover { background: #00ffea; color: #000; }

    #notesSection {
      margin-top: 30px;
      padding: 20px;
      background: rgba(0,0,0,0.6);
      border: 3px solid #00ffea;
      border-radius: 12px;
      max-width: 900px;
    }
    #notesSection h2 {
      color: #ff0;
      text-shadow: 2px 2px #000;
      margin-bottom: 20px;
      font-size: 16px;
    }
    .note-form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 20px;
      align-items: center;
    }
    .note-form input, .note-form textarea {
      background: #111;
      color: #0f0;
      border: 2px solid #00ffea;
      padding: 10px;
      font-size: 12px;
      width: 100%;
      max-width: 520px;
    }
    .note-form button {
      background: #ff0080;
      border: 2px solid #000;
      padding: 10px 14px;
      cursor: pointer;
    }
    .note-form button:hover { background: #00ffea; color: #000; }
    .notes-wall {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 15px;
    }
    .note {
      padding: 15px;
      background: #222;
      border: 3px solid #ff0080;
      box-shadow: 3px 3px #000;
      font-size: 12px;
      word-wrap: break-word;
      transform: rotate(-1deg);
      text-align: left;
      position: relative;
      min-height: 84px;
    }
    .note:nth-child(odd) {
      background: #333;
      border-color: #00ffea;
      transform: rotate(1deg);
    }
    .note .nickname {
      font-weight: bold;
      color: #ff0;
      margin-bottom: 8px;
      display: block;
    }
    .delete-btn {
      display: inline-block;
      margin-top: 8px;
      background: #e60026;
      border: 3px solid #000;
      color: #fff;
      padding: 6px 8px;
      font-size: 10px;
      font-family: 'Press Start 2P', cursive;
      cursor: pointer;
      box-shadow: 2px 2px #000;
    }
    .delete-btn:hover { background: #ff8c00; color: #000; }

    /* Chatbot - pixel style */
    #chatBotBubble {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 52px;
      height: 52px;
      background: #ff0080;
      color: #fff;
      border: 4px solid #000;
      padding: 8px;
      border-radius: 8px;
      font-family: 'Press Start 2P', cursive;
      font-size: 18px;
      cursor: pointer;
      box-shadow: 3px 3px #000;
      z-index: 2000;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    #chatWindow {
      position: fixed;
      bottom: 84px;
      right: 20px;
      width: 300px;
      background: #111;
      border: 4px solid #00ffea;
      border-radius: 8px;
      font-family: 'Press Start 2P', cursive;
      font-size: 12px;
      color: #0f0;
      display: none;
      flex-direction: column;
      box-shadow: 4px 4px #000;
      z-index: 2000;
      overflow: hidden;
    }
    #chatMessages {
      padding: 10px;
      height: 220px;
      overflow-y: auto;
      border-bottom: 2px solid #00ffea;
    }
    .msg {
      margin-bottom: 8px;
      line-height: 1.2;
      word-break: break-word;
    }
    .msg.user { color: #0ff; text-align: right; }
    .msg.bot { color: #f55; text-align: left; font-weight: bold; }
    #chatInput {
      display: flex;
    }
    #chatInput input {
      flex: 1;
      background: #111;
      color: #0f0;
      border: none;
      padding: 8px;
      font-size: 12px;
      font-family: 'Press Start 2P', cursive;
    }
    #chatInput button {
      background: #ff0080;
      border: none;
      padding: 8px 10px;
      cursor: pointer;
      font-family: 'Press Start 2P', cursive;
      color: #fff;
    }
    #chatInput button:hover { background: #00ffea; color: #000; }
  </style>
</head>
<body>
  <div class="banner">Abo Mazen's dungeon</div>
  <h1>üïπÔ∏è ENTER THE KEY</h1>

  <!-- Pixel character + speech bubble -->
  <div id="pixelCharacterContainer">
    <img src="https://i.postimg.cc/9Xvbc3sw-/7eed46e2-854a-46dd-a073-c66409387f95.png"
         id="pixelCharacter"
         alt="Pixel Character"
         width="120">
    <div id="speechBubble" class="hidden">
      <span id="characterSpeech">üí¨ ...</span>
    </div>
  </div>

  <div class="input-box">
    <input type="password" id="keyInput" placeholder="Type here..." onkeydown="if(event.key==='Enter')unlock()">
    <button onclick="showHint()">üí° Hint</button>
  </div>
  <button onclick="unlock()">UNLOCK</button>

  <div id="links" class="hidden">
    <h2> üéâ ACCESS GRANTED <span id="roleBadge" class="badge hidden">ADMIN MODE</span> </h2>
    <div class="links">
      <button onclick="window.open('https://github.com/GhassanMazen00/GhassanMazen00','_blank')">üíª GitHub</button>
      <button onclick="window.open('https://t.snapchat.com/p3KLzoLR','_blank')">üëª Snapchat</button>
      <button onclick="window.open('mailto:ghassanmazen@zohomail.com','_blank')">üìß Email</button>
      <button onclick="openModal()">üíÉ My Bitches</button>
      <button onclick="trap()">üîû +18 Pics of Ghassan</button>
    </div>

    <!-- Visitor Notes Wall -->
    <div id="notesSection">
      <h2>üìù Visitor Wall</h2>
      <div class="note-form">
        <input type="text" id="nickname" placeholder="Your nickname...">
        <textarea id="noteText" rows="3" placeholder="Leave a note..."></textarea>
        <button onclick="addNote()">Post Note</button>
      </div>
      <div class="notes-wall" id="notesWall"></div>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal" id="myModal">
    <div class="modal-content">
      <a href="https://www.instagram.com/loai_abb/" target="_blank">
        <img src="https://i.postimg.cc/XqLnjRMS/20250819-2117-Pixel-Ginger-Character-simple-compose-01k31rss70fmktq7sny215zh9h.png" width="80" class="pixel-character">
      </a>
      <a href="https://www.instagram.com/osaidjano/" target="_blank">
        <img src="https://i.postimg.cc/JhH7NYXZ/20250819-2129-Pixel-Man-with-T-Shirt-simple-compose-01k31scc2efvfbt02vce5hkp5r.png" width="80" class="pixel-character">
      </a>
      <a href="https://www.instagram.com/loai_kashkash/" target="_blank">
        <img src="https://i.postimg.cc/76gxcCmL/20250819-2136-Pixel-Fat-Man-simple-compose-01k31sw-dygemgba9w7vm7tmpq5.png" width="80" class="pixel-character">
      </a>
      <a href="https://www.instagram.com/khalid.alfares1/" target="_blank">
        <img src="https://i.postimg.cc/d1Ms4RRX/20250819-2140-Pixel-Man-with-Flag-simple-compose-01k31t39ykee6bbh3fcc1xfhjv-removebg-preview.png" width="80" class="pixel-character">
      </a>
      <a href="https://www.instagram.com/badr_sanoufi/" target="_blank">
        <img src="https://i.postimg.cc/j2tsrsF4/assets-task-01k31taeamf6tavtp3htwn6b2h-1755629076-img-0.webp" width="80" class="pixel-character">
      </a>
      <button class="close-btn" onclick="closeModal()">CLOSE</button>
    </div>
  </div>

  <!-- Chatbot -->
  <div id="chatBotBubble" title="Chat for help">üí¨</div>
  <div id="chatWindow" aria-hidden="true">
    <div id="chatMessages" aria-live="polite"></div>
    <div id="chatInput">
      <input type="text" id="userMessage" placeholder="Type..." />
      <button id="sendBtn">Send</button>
    </div>
  </div>

  <!-- Firebase (compat) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

  <script>
    // ----- Config & state -----
    let mode = 'locked';
    let isAdmin = false;
    const VISITOR_PASS = "10101999";
    const ADMIN_PASS = "ananke";

    const firebaseConfig = {
      databaseURL: "https://dungeon-data-base-default-rtdb.firebaseio.com/"
    };
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // ----- Utilities -----
    function escapeHTML(str) {
      if (str === null || str === undefined) return '';
      return String(str)
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;");
    }

    // ----- Vault functions -----
    function unlock() {
      const key = document.getElementById('keyInput').value.trim();
      if (key === VISITOR_PASS) {
        mode = 'visitor'; isAdmin = false; enterVault();
      } else if (key === ADMIN_PASS) {
        mode = 'admin'; isAdmin = true; enterVault();
      } else {
        alert("‚ùå WRONG KEY. TRY AGAIN!");
      }
    }

    function enterVault() {
      document.getElementById('links').classList.remove('hidden');
      document.getElementById('roleBadge').classList.toggle('hidden', !isAdmin);
      displayNotes();
      setTimeout(() => document.getElementById('links').scrollIntoView({behavior:'smooth'}), 50);
    }

    function showHint() {
      alert("When was the greatest human on earth born? (type numbers only, format: daymonthyear)");
    }
    function trap() {
      alert("‚ö†Ô∏è Ghassan got notified that you tried to see him naked, shame on you!");
    }
    function openModal() {
      document.getElementById("myModal").style.display = "flex";
    }
    function closeModal() {
      document.getElementById("myModal").style.display = "none";
    }

    // ----- Notes (Firebase) -----
    function addNote() {
      const nickname = document.getElementById("nickname").value.trim();
      const noteText = document.getElementById("noteText").value.trim();
      if (!nickname || !noteText) {
        alert("‚ö†Ô∏è Please enter a nickname and a note!");
        return;
      }
      const safeNote = {
        nickname: escapeHTML(nickname),
        text: escapeHTML(noteText),
        timestamp: Date.now()
      };
      db.ref("notes").push(safeNote);
      document.getElementById("nickname").value = "";
      document.getElementById("noteText").value = "";
    }

    function displayNotes() {
      const notesWall = document.getElementById("notesWall");
      notesWall.innerHTML = "";
      db.ref("notes").on("value", (snapshot) => {
        notesWall.innerHTML = "";
        snapshot.forEach((child) => {
          const note = child.val();
          const noteDiv = document.createElement("div");
          noteDiv.className = "note";

          const nickSpan = document.createElement("span");
          nickSpan.className = "nickname";
          nickSpan.textContent = note.nickname || "Anon";

          const textDiv = document.createElement("div");
          textDiv.innerHTML = (note.text || "").replace(/\n/g, "<br>");

          noteDiv.appendChild(nickSpan);
          noteDiv.appendChild(textDiv);

          if (isAdmin) {
            const delBtn = document.createElement("button");
            delBtn.className = "delete-btn";
            delBtn.textContent = "‚ùå Delete";
            delBtn.onclick = () => deleteNote(child.key);
            noteDiv.appendChild(delBtn);
          }

          notesWall.appendChild(noteDiv);
        });
      });
    }

    function deleteNote(id) {
      if (!isAdmin) return;
      db.ref("notes/" + id).remove();
    }

    // ----- Pixel Character speech -----
    const speechLines = [
      "Hmmm... you seek the secret key?",
      "Let me think... it‚Äôs a date...",
      "The greatest human‚Äôs birthday... 10101999.",
      "Congrats, genius. Even YOU can‚Äôt mess this up, stupid.",
      "Ghassan is watching..."
    ];
    const pixelChar = document.getElementById("pixelCharacter");
    const bubble = document.getElementById("speechBubble");
    const speechText = document.getElementById("characterSpeech");
    let characterClicks = 0;
    if (pixelChar) {
      pixelChar.addEventListener("click", () => {
        characterClicks++;
        bubble.classList.remove("hidden");
        if (characterClicks <= speechLines.length) {
          speechText.textContent = speechLines[(characterClicks - 1) % speechLines.length];
        } else {
          speechText.textContent = speechLines[Math.floor(Math.random() * speechLines.length)];
        }
      });
    }

    // ----- Chatbot Insult Machine -----
    const insults = [
      "You're as sharp as a marble.",
      "I‚Äôd agree with you, but then we‚Äôd both be wrong.",
      "Your secrets are safe with me. I never even listen.",
      "You bring everyone so much joy... when you leave the room.",
      "You have something on your chin. No, the third one down.",
      "I'd explain it to you, but I left my crayons at home.",
      "You're proof that even evolution makes mistakes.",
      "Brains aren‚Äôt everything. In your case, they‚Äôre nothing.",
      "Wow, that idea deserves a participation trophy.",
      "You're like a software bug that hides behind a smile.",
      "Keep typing ‚Äî maybe one day you'll surprise us all.",
      "You managed to be wrong in a very impressive fashion."
    ];

    const chatBubble = document.getElementById("chatBotBubble");
    const chatWindow = document.getElementById("chatWindow");
    const chatMessages = document.getElementById("chatMessages");
    const userMessageInput = document.getElementById("userMessage");
    const sendBtn = document.getElementById("sendBtn");

    function appendMessage(text, who) {
      const div = document.createElement("div");
      div.className = "msg " + (who === "user" ? "user" : "bot");
      div.innerText = text;
      chatMessages.appendChild(div);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    // toggle chat window
    chatBubble.addEventListener("click", () => {
      if (chatWindow.style.display === "flex") {
        chatWindow.style.display = "none";
        chatWindow.setAttribute("aria-hidden","true");
      } else {
        chatWindow.style.display = "flex";
        chatWindow.setAttribute("aria-hidden","false");
        userMessageInput.focus();
      }
    });

    // send message (and bot replies with a random insult)
    function sendMessage() {
      const txt = userMessageInput.value.trim();
      if (!txt) return;
      appendMessage("You: " + txt, "user");
      userMessageInput.value = "";
      // small delay then insult
      setTimeout(() => {
        const insult = insults[Math.floor(Math.random() * insults.length)];
        appendMessage("Bot: " + insult, "bot");
      }, 350);
    }

    sendBtn.addEventListener("click", sendMessage);
    userMessageInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") sendMessage();
    });

    // Optional: pre-warm with a greeting so chat isn't empty
    appendMessage("Bot: Ask me anything (I will help you).", "bot");

    // End of script
  </script>
</body>
</html>
